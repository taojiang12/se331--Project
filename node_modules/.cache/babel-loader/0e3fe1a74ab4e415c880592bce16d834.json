{"remainingRequest":"D:\\Vue\\labq5\\node_modules\\babel-loader\\lib\\index.js!D:\\Vue\\labq5\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!D:\\Vue\\labq5\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Vue\\labq5\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\Vue\\labq5\\src\\views\\Home.vue?vue&type=template&id=fae5bece&scoped=true","dependencies":[{"path":"D:\\Vue\\labq5\\src\\views\\Home.vue","mtime":1628223309706},{"path":"D:\\Vue\\labq5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\labq5\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Vue\\labq5\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":499162500000},{"path":"D:\\Vue\\labq5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\labq5\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVuZGVyTGlzdCBhcyBfcmVuZGVyTGlzdCwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCByZXNvbHZlQ29tcG9uZW50IGFzIF9yZXNvbHZlQ29tcG9uZW50LCBjcmVhdGVWTm9kZSBhcyBfY3JlYXRlVk5vZGUsIGNyZWF0ZVRleHRWTm9kZSBhcyBfY3JlYXRlVGV4dFZOb2RlLCB3aXRoQ3R4IGFzIF93aXRoQ3R4LCB3aXRoU2NvcGVJZCBhcyBfd2l0aFNjb3BlSWQsIHB1c2hTY29wZUlkIGFzIF9wdXNoU2NvcGVJZCwgcG9wU2NvcGVJZCBhcyBfcG9wU2NvcGVJZCB9IGZyb20gInZ1ZSI7Cgp2YXIgX3dpdGhJZCA9IC8qI19fUFVSRV9fKi9fd2l0aFNjb3BlSWQoImRhdGEtdi1mYWU1YmVjZSIpOwoKX3B1c2hTY29wZUlkKCJkYXRhLXYtZmFlNWJlY2UiKTsKCnZhciBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAiZXZlbnRzIgp9OwoKdmFyIF9ob2lzdGVkXzIgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVRleHRWTm9kZSgiQmFjayIpOwoKX3BvcFNjb3BlSWQoKTsKCmV4cG9ydCB2YXIgcmVuZGVyID0gLyojX19QVVJFX18qL193aXRoSWQoZnVuY3Rpb24gKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIHZhciBfY29tcG9uZW50X0V2ZW50Q2FyZCA9IF9yZXNvbHZlQ29tcG9uZW50KCJFdmVudENhcmQiKTsKCiAgdmFyIF9jb21wb25lbnRfcm91dGVyX2xpbmsgPSBfcmVzb2x2ZUNvbXBvbmVudCgicm91dGVyLWxpbmsiKTsKCiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9GcmFnbWVudCwgbnVsbCwgW19jcmVhdGVWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMSwgWyhfb3BlbkJsb2NrKHRydWUpLCBfY3JlYXRlQmxvY2soX0ZyYWdtZW50LCBudWxsLCBfcmVuZGVyTGlzdCgkZGF0YS5ldmVudHMsIGZ1bmN0aW9uIChldmVudCkgewogICAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfRXZlbnRDYXJkLCB7CiAgICAgIGtleTogZXZlbnQuX2lkLAogICAgICBldmVudDogZXZlbnQKICAgIH0sIG51bGwsIDgKICAgIC8qIFBST1BTICovCiAgICAsIFsiZXZlbnQiXSk7CiAgfSksIDEyOAogIC8qIEtFWUVEX0ZSQUdNRU5UICovCiAgKSldKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfcm91dGVyX2xpbmssIHsKICAgIHRvOiB7CiAgICAgIG5hbWU6ICdIb21lJwogICAgfQogIH0sIHsKICAgIGRlZmF1bHQ6IF93aXRoSWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gW19ob2lzdGVkXzJdOwogICAgfSksCiAgICBfOiAxCiAgICAvKiBTVEFCTEUgKi8KCiAgfSldLCA2NAogIC8qIFNUQUJMRV9GUkFHTUVOVCAqLwogICk7Cn0pOw=="},{"version":3,"sources":["D:\\Vue\\labq5\\src\\views\\Home.vue"],"names":[],"mappings":";;;;;;;AACO,EAAA,KAAK,EAAC;;;+CAIyB,M;;;;;;;;;sDAJpC,YAAA,CAGM,KAHN,EAAA,UAAA,EAGM,E,kBAFJ,YAAA,CAAqE,SAArE,EAAqE,IAArE,EAAqE,WAAA,CAA1C,KAAA,CAAA,MAA0C,EAApC,UAAf,KAAe,EAAV;yBAAvB,YAAA,CAAqE,oBAArE,EAAqE;AAAjC,MAAA,GAAG,EAAE,KAAK,CAAC,GAAsB;AAAhB,MAAA,KAAK,EAAE;AAAS,KAArE,E,IAAA,E;;AAAA,M,SAAA,C;GAAqE,CAArE,E;;AAAA,GAEI,EAHN,C,EAIA,YAAA,CAAsD,sBAAtD,EAAsD;AAAxC,IAAA,EAAE,EAAE;AAAA,MAAA,IAAA,EAAA;AAAA;AAAoC,GAAtD,EAAkC;qBAAE;AAAA,aAAI,C,UAAA,CAAJ;AAAA,K,CAAF;;;;AAAA,GAAlC,C","sourcesContent":["<template>\r\n  <div class=\"events\">\r\n    <EventCard v-for=\"event in events\" :key=\"event._id\" :event=\"event\" />\r\n\r\n  </div>\r\n  <router-link :to=\"{ name: 'Home' }\">Back</router-link>\r\n</template>\r\n\r\n<script>\r\n// @ is an alias to /src\r\n// import HelloWorld from \"@/components/HelloWorld.vue\";\r\nimport EventCard from '@/components/EventCard.vue'\r\nimport EventService from '@/services/EventService.js'\r\n//import { watchEffect } from '@vue/runtime-core'\r\n\r\nexport default {\r\n  //receive page variable props in the component\r\n  name: 'EventList',\r\n  props: {\r\n    page: {\r\n      type: Number,\r\n      required: true\r\n    },\r\n    perPage: {\r\n      type: Number,\r\n      required: true\r\n    }\r\n  },\r\n  components: {\r\n    EventCard\r\n    // register it as a child component\r\n  },\r\n  data() {\r\n    return {\r\n      events: null,\r\n      totalEvents: 0 // <-- Added this to store totalEvents\r\n    }\r\n  },\r\n  /*created() {\r\n    watchEffect(() => {\r\n      EventService.getEvents(this.perPage, this.page)\r\n        .then((response) => {\r\n          this.events = response.data.data\r\n          this.totalEvents = response.headers['x-total-count'] // <-- Store it\r\n        })\r\n        .catch((error) => {\r\n          console.log(error)\r\n        })\r\n    })\r\n  },*/\r\n\r\n  beforeRouteEnter(routeTo, routeFrom, next) {\r\n    EventService.getEvents(parseInt(routeTo.query.perPage) || 5)\r\n      .then((response) => {\r\n        next((comp) => {\r\n          comp.events = response.data.data\r\n          comp.totalEvents = response.headers['x-total-count']\r\n        })\r\n      })\r\n      .catch(() => {\r\n        next({ name: 'NetworkError' })\r\n      })\r\n  },\r\n  beforeRouteUpdate(routeTo, routeFrom, next) {\r\n    EventService.getEventsparseInt(parseInt(routeTo.query.perPage) || 5)\r\n      .then((response) => {\r\n        this.events = response.data.data\r\n        this.totalEvents = response.headers['x-total-count']\r\n        next()\r\n      })\r\n      .catch(() => {\r\n        next({ name: 'NetworkError' })\r\n      })\r\n  },\r\n    computed: {\r\n    hasNextPage() {\r\n      // First, calculate total pages\r\n      let totalPages = Math.ceil(this.totalEvents / 2) // 2 is events per page\r\n\r\n      // Then check to see if the current page is less than the total pages.\r\n      return this.perPage < totalPages\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.events {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n</style>"],"sourceRoot":""}]}