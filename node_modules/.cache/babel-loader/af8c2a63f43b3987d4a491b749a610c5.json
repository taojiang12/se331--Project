{"remainingRequest":"D:\\Vue\\labq5 - 副本\\node_modules\\babel-loader\\lib\\index.js!D:\\Vue\\labq5 - 副本\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!D:\\Vue\\labq5 - 副本\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Vue\\labq5 - 副本\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\Vue\\labq5 - 副本\\src\\views\\Home.vue?vue&type=template&id=fae5bece&scoped=true","dependencies":[{"path":"D:\\Vue\\labq5 - 副本\\src\\views\\Home.vue","mtime":1629032962732},{"path":"D:\\Vue\\labq5 - 副本\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\labq5 - 副本\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Vue\\labq5 - 副本\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":499162500000},{"path":"D:\\Vue\\labq5 - 副本\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\labq5 - 副本\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVuZGVyTGlzdCBhcyBfcmVuZGVyTGlzdCwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCByZXNvbHZlQ29tcG9uZW50IGFzIF9yZXNvbHZlQ29tcG9uZW50LCBjcmVhdGVWTm9kZSBhcyBfY3JlYXRlVk5vZGUsIGNyZWF0ZVRleHRWTm9kZSBhcyBfY3JlYXRlVGV4dFZOb2RlLCB3aXRoQ3R4IGFzIF93aXRoQ3R4LCB3aXRoU2NvcGVJZCBhcyBfd2l0aFNjb3BlSWQsIHB1c2hTY29wZUlkIGFzIF9wdXNoU2NvcGVJZCwgcG9wU2NvcGVJZCBhcyBfcG9wU2NvcGVJZCB9IGZyb20gInZ1ZSI7Cgp2YXIgX3dpdGhJZCA9IC8qI19fUFVSRV9fKi9fd2l0aFNjb3BlSWQoImRhdGEtdi1mYWU1YmVjZSIpOwoKX3B1c2hTY29wZUlkKCJkYXRhLXYtZmFlNWJlY2UiKTsKCnZhciBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAiZXZlbnRzIgp9OwoKdmFyIF9ob2lzdGVkXzIgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVZOb2RlKCJiciIsIG51bGwsIG51bGwsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF8zID0gLyojX19QVVJFX18qL19jcmVhdGVWTm9kZSgiYnIiLCBudWxsLCBudWxsLCAtMQovKiBIT0lTVEVEICovCik7Cgp2YXIgX2hvaXN0ZWRfNCA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVGV4dFZOb2RlKCJHbyB0byB0aGUgdG9wIik7CgpfcG9wU2NvcGVJZCgpOwoKZXhwb3J0IHZhciByZW5kZXIgPSAvKiNfX1BVUkVfXyovX3dpdGhJZChmdW5jdGlvbiAoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgdmFyIF9jb21wb25lbnRfRXZlbnRDYXJkID0gX3Jlc29sdmVDb21wb25lbnQoIkV2ZW50Q2FyZCIpOwoKICB2YXIgX2NvbXBvbmVudF9yb3V0ZXJfbGluayA9IF9yZXNvbHZlQ29tcG9uZW50KCJyb3V0ZXItbGluayIpOwoKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX0ZyYWdtZW50LCBudWxsLCBbX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF8xLCBbKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVCbG9jayhfRnJhZ21lbnQsIG51bGwsIF9yZW5kZXJMaXN0KCRkYXRhLmV2ZW50cywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX2NvbXBvbmVudF9FdmVudENhcmQsIHsKICAgICAga2V5OiBldmVudC5pZCwKICAgICAgZXZlbnQ6IGV2ZW50CiAgICB9LCBudWxsLCA4CiAgICAvKiBQUk9QUyAqLwogICAgLCBbImV2ZW50Il0pOwogIH0pLCAxMjgKICAvKiBLRVlFRF9GUkFHTUVOVCAqLwogICkpXSksIF9ob2lzdGVkXzIsIF9ob2lzdGVkXzMsIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X3JvdXRlcl9saW5rLCB7CiAgICB0bzogewogICAgICBuYW1lOiAnSG9tZScKICAgIH0KICB9LCB7CiAgICBkZWZhdWx0OiBfd2l0aElkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIFtfaG9pc3RlZF80XTsKICAgIH0pLAogICAgXzogMQogICAgLyogU1RBQkxFICovCgogIH0pXSwgNjQKICAvKiBTVEFCTEVfRlJBR01FTlQgKi8KICApOwp9KTs="},{"version":3,"sources":["D:\\Vue\\labq5 - 副本\\src\\views\\Home.vue"],"names":[],"mappings":";;;;;;;AACK,EAAA,KAAK,EAAC;;;8BAGR,YAAA,CAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI,CAAA;AAAA;AAAJ,C;;8BACA,YAAA,CAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI,CAAA;AAAA;AAAJ,C;;8BAJH,gBAAA,CAKsC,eALtC,C;;;;;;;;;uBAAA,YAAA,CAAA,SAAA,EAAA,IAAA,EAAA,CAAA,YAAA,CAEQ,KAFR,EAAA,UAAA,EAEQ,E,kBADJ,YAAA,CAAoE,SAApE,EAAoE,IAApE,EADJ,WAAA,CAC+B,KAAA,CAAA,MAD/B,EAAA,UACsB,KADtB,EAC2B;yBAAvB,YAAA,CAAoE,oBAApE,EAAoE;AAAhC,MAAA,GAAG,EAAE,KAAK,CAAC,EAAqB;AAAhB,MAAA,KAAK,EAAE;AAAS,KAApE,E,IAAA,E;;AAAA,M,SAAA,C;GADJ,CACI,E;;AAAA,GACI,EAFR,CAAA,EAGG,UAHH,EAIG,UAJH,EAKE,YAAA,CAA+D,sBAA/D,EAA+D;AAAjD,IAAA,EAAE,EAAE;AAAA,MAAA,IAAA,EAAA;AAAA;AAA6C,GAA/D,EAAkC;AALpC,IAAA,OAAA,EAAA,OAAA,CAKsC;AAAA,aAAa,CALnD,UAKmD,CAAb;AAAA,KALtC,CAKoC;AALpC,IAAA,CAAA,EAAA;AAAA;;AAKoC,GAAlC,CALF,CAAA,E;;AAAA,G","sourcesContent":["<template>\r\n  <div class=\"events\">\r\n    <EventCard v-for=\"event in events\" :key=\"event.id\" :event=\"event\" />\r\n  </div>\r\n   <br>\r\n   <br>\r\n  <router-link :to=\"{ name: 'Home' }\">Go to the top</router-link>\r\n</template>\r\n\r\n<script>\r\n// @ is an alias to /src\r\n// import HelloWorld from \"@/components/HelloWorld.vue\";\r\nimport EventCard from '@/components/EventCard.vue'\r\nimport EventService from '@/services/EventService.js'\r\n//import { watchEffect } from '@vue/runtime-core'\r\n\r\nexport default {\r\n  //receive page variable props in the component\r\n  name: 'EventList',\r\n  props: {\r\n    page: {\r\n      type: Number,\r\n      required: true\r\n    },\r\n    perPage: {\r\n      type: Number,\r\n      required: true\r\n    }\r\n  },\r\n  components: {\r\n    EventCard\r\n    // register it as a child component\r\n  },\r\n  data() {\r\n    return {\r\n      events: null,\r\n      totalEvents: 0 // <-- Added this to store totalEvents\r\n    }\r\n  },\r\n  /*created() {\r\n    watchEffect(() => {\r\n      EventService.getEvents(this.perPage, this.page)\r\n        .then((response) => {\r\n          this.events = response.data.data\r\n          this.totalEvents = response.headers['x-total-count'] // <-- Store it\r\n        })\r\n        .catch((error) => {\r\n          console.log(error)\r\n        })\r\n    })\r\n  },*/\r\n\r\n  beforeRouteEnter(routeTo, routeFrom, next) {\r\n    EventService.getEvents(parseInt(routeTo.query.perPage) || 5)\r\n      .then((response) => {\r\n        next((comp) => {\r\n          comp.events = response.data\r\n          comp.totalEvents = response.headers['x-total-count']\r\n        })\r\n      })\r\n      .catch(() => {\r\n        next({ name: 'NetworkError' })\r\n      })\r\n  },\r\n  beforeRouteUpdate(routeTo, routeFrom, next) {\r\n    EventService.getEventsparseInt(parseInt(routeTo.query.perPage) || 5)\r\n      .then((response) => {\r\n        this.events = response.data\r\n        this.totalEvents = response.headers['x-total-count']\r\n        next()\r\n      })\r\n      .catch(() => {\r\n        next({ name: 'NetworkError' })\r\n      })\r\n  },\r\n    computed: {\r\n    hasNextPage() {\r\n      // First, calculate total pages\r\n      let totalPages = Math.ceil(this.totalEvents / 2) // 2 is events per page\r\n\r\n      // Then check to see if the current page is less than the total pages.\r\n      return this.perPage < totalPages\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.events {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n</style>"],"sourceRoot":""}]}