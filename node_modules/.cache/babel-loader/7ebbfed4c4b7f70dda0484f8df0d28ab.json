{"remainingRequest":"D:\\Vue\\labq5 - 副本\\node_modules\\babel-loader\\lib\\index.js!D:\\Vue\\labq5 - 副本\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Vue\\labq5 - 副本\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\Vue\\labq5 - 副本\\src\\views\\Home.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Vue\\labq5 - 副本\\src\\views\\Home.vue","mtime":1629032962732},{"path":"D:\\Vue\\labq5 - 副本\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\labq5 - 副本\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Vue\\labq5 - 副本\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\labq5 - 副本\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKLy8gQCBpcyBhbiBhbGlhcyB0byAvc3JjCi8vIGltcG9ydCBIZWxsb1dvcmxkIGZyb20gIkAvY29tcG9uZW50cy9IZWxsb1dvcmxkLnZ1ZSI7CmltcG9ydCBFdmVudENhcmQgZnJvbSAnQC9jb21wb25lbnRzL0V2ZW50Q2FyZC52dWUnOwppbXBvcnQgRXZlbnRTZXJ2aWNlIGZyb20gJ0Avc2VydmljZXMvRXZlbnRTZXJ2aWNlLmpzJzsgLy9pbXBvcnQgeyB3YXRjaEVmZmVjdCB9IGZyb20gJ0B2dWUvcnVudGltZS1jb3JlJwoKZXhwb3J0IGRlZmF1bHQgewogIC8vcmVjZWl2ZSBwYWdlIHZhcmlhYmxlIHByb3BzIGluIHRoZSBjb21wb25lbnQKICBuYW1lOiAnRXZlbnRMaXN0JywKICBwcm9wczogewogICAgcGFnZTogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgcGVyUGFnZTogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBFdmVudENhcmQ6IEV2ZW50Q2FyZCAvLyByZWdpc3RlciBpdCBhcyBhIGNoaWxkIGNvbXBvbmVudAoKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBldmVudHM6IG51bGwsCiAgICAgIHRvdGFsRXZlbnRzOiAwIC8vIDwtLSBBZGRlZCB0aGlzIHRvIHN0b3JlIHRvdGFsRXZlbnRzCgogICAgfTsKICB9LAoKICAvKmNyZWF0ZWQoKSB7DQogICAgd2F0Y2hFZmZlY3QoKCkgPT4gew0KICAgICAgRXZlbnRTZXJ2aWNlLmdldEV2ZW50cyh0aGlzLnBlclBhZ2UsIHRoaXMucGFnZSkNCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgdGhpcy5ldmVudHMgPSByZXNwb25zZS5kYXRhLmRhdGENCiAgICAgICAgICB0aGlzLnRvdGFsRXZlbnRzID0gcmVzcG9uc2UuaGVhZGVyc1sneC10b3RhbC1jb3VudCddIC8vIDwtLSBTdG9yZSBpdA0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpDQogICAgICAgIH0pDQogICAgfSkNCiAgfSwqLwogIGJlZm9yZVJvdXRlRW50ZXI6IGZ1bmN0aW9uIGJlZm9yZVJvdXRlRW50ZXIocm91dGVUbywgcm91dGVGcm9tLCBuZXh0KSB7CiAgICBFdmVudFNlcnZpY2UuZ2V0RXZlbnRzKHBhcnNlSW50KHJvdXRlVG8ucXVlcnkucGVyUGFnZSkgfHwgNSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgbmV4dChmdW5jdGlvbiAoY29tcCkgewogICAgICAgIGNvbXAuZXZlbnRzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBjb21wLnRvdGFsRXZlbnRzID0gcmVzcG9uc2UuaGVhZGVyc1sneC10b3RhbC1jb3VudCddOwogICAgICB9KTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgbmV4dCh7CiAgICAgICAgbmFtZTogJ05ldHdvcmtFcnJvcicKICAgICAgfSk7CiAgICB9KTsKICB9LAogIGJlZm9yZVJvdXRlVXBkYXRlOiBmdW5jdGlvbiBiZWZvcmVSb3V0ZVVwZGF0ZShyb3V0ZVRvLCByb3V0ZUZyb20sIG5leHQpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgRXZlbnRTZXJ2aWNlLmdldEV2ZW50c3BhcnNlSW50KHBhcnNlSW50KHJvdXRlVG8ucXVlcnkucGVyUGFnZSkgfHwgNSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgX3RoaXMuZXZlbnRzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgX3RoaXMudG90YWxFdmVudHMgPSByZXNwb25zZS5oZWFkZXJzWyd4LXRvdGFsLWNvdW50J107CiAgICAgIG5leHQoKTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgbmV4dCh7CiAgICAgICAgbmFtZTogJ05ldHdvcmtFcnJvcicKICAgICAgfSk7CiAgICB9KTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBoYXNOZXh0UGFnZTogZnVuY3Rpb24gaGFzTmV4dFBhZ2UoKSB7CiAgICAgIC8vIEZpcnN0LCBjYWxjdWxhdGUgdG90YWwgcGFnZXMKICAgICAgdmFyIHRvdGFsUGFnZXMgPSBNYXRoLmNlaWwodGhpcy50b3RhbEV2ZW50cyAvIDIpOyAvLyAyIGlzIGV2ZW50cyBwZXIgcGFnZQogICAgICAvLyBUaGVuIGNoZWNrIHRvIHNlZSBpZiB0aGUgY3VycmVudCBwYWdlIGlzIGxlc3MgdGhhbiB0aGUgdG90YWwgcGFnZXMuCgogICAgICByZXR1cm4gdGhpcy5wZXJQYWdlIDwgdG90YWxQYWdlczsKICAgIH0KICB9Cn07"},{"version":3,"sources":["D:\\Vue\\labq5 - 副本\\src\\views\\Home.vue"],"names":[],"mappings":";AAUA;AACA;AACA,OAAO,SAAP,MAAsB,4BAAtB;AACA,OAAO,YAAP,MAAyB,4BAAzB,C,CACA;;AAEA,eAAe;AACb;AACA,EAAA,IAAI,EAAE,WAFO;AAGb,EAAA,KAAK,EAAE;AACL,IAAA,IAAI,EAAE;AACJ,MAAA,IAAI,EAAE,MADF;AAEJ,MAAA,QAAQ,EAAE;AAFN,KADD;AAKL,IAAA,OAAO,EAAE;AACP,MAAA,IAAI,EAAE,MADC;AAEP,MAAA,QAAQ,EAAE;AAFH;AALJ,GAHM;AAab,EAAA,UAAU,EAAE;AACV,IAAA,SAAQ,EAAR,SADU,CAEV;;AAFU,GAbC;AAiBb,EAAA,IAjBa,kBAiBN;AACL,WAAO;AACL,MAAA,MAAM,EAAE,IADH;AAEL,MAAA,WAAW,EAAE,CAFR,CAEU;;AAFV,KAAP;AAID,GAtBY;;AAuBb;AACE;AACE;AACE;AACE;AACA;AACF;AACA;AACE;AACF;AACJ;AACF;AAEA,EAAA,gBApCa,4BAoCI,OApCJ,EAoCa,SApCb,EAoCwB,IApCxB,EAoC8B;AACzC,IAAA,YAAY,CAAC,SAAb,CAAuB,QAAQ,CAAC,OAAO,CAAC,KAAR,CAAc,OAAf,CAAR,IAAmC,CAA1D,EACG,IADH,CACQ,UAAC,QAAD,EAAc;AAClB,MAAA,IAAI,CAAC,UAAC,IAAD,EAAU;AACb,QAAA,IAAI,CAAC,MAAL,GAAc,QAAQ,CAAC,IAAvB;AACA,QAAA,IAAI,CAAC,WAAL,GAAmB,QAAQ,CAAC,OAAT,CAAiB,eAAjB,CAAnB;AACD,OAHG,CAAJ;AAID,KANH,EAOG,KAPH,CAOS,YAAM;AACX,MAAA,IAAI,CAAC;AAAE,QAAA,IAAI,EAAE;AAAR,OAAD,CAAJ;AACD,KATH;AAUD,GA/CY;AAgDb,EAAA,iBAhDa,6BAgDK,OAhDL,EAgDc,SAhDd,EAgDyB,IAhDzB,EAgD+B;AAAA;;AAC1C,IAAA,YAAY,CAAC,iBAAb,CAA+B,QAAQ,CAAC,OAAO,CAAC,KAAR,CAAc,OAAf,CAAR,IAAmC,CAAlE,EACG,IADH,CACQ,UAAC,QAAD,EAAc;AAClB,MAAA,KAAI,CAAC,MAAL,GAAc,QAAQ,CAAC,IAAvB;AACA,MAAA,KAAI,CAAC,WAAL,GAAmB,QAAQ,CAAC,OAAT,CAAiB,eAAjB,CAAnB;AACA,MAAA,IAAI;AACL,KALH,EAMG,KANH,CAMS,YAAM;AACX,MAAA,IAAI,CAAC;AAAE,QAAA,IAAI,EAAE;AAAR,OAAD,CAAJ;AACD,KARH;AASD,GA1DY;AA2DX,EAAA,QAAQ,EAAE;AACV,IAAA,WADU,yBACI;AACZ;AACA,UAAI,UAAS,GAAI,IAAI,CAAC,IAAL,CAAU,KAAK,WAAL,GAAmB,CAA7B,CAAjB,CAFY,CAEqC;AAEjD;;AACA,aAAO,KAAK,OAAL,GAAe,UAAtB;AACF;AAPU;AA3DC,CAAf","sourcesContent":["<template>\r\n  <div class=\"events\">\r\n    <EventCard v-for=\"event in events\" :key=\"event.id\" :event=\"event\" />\r\n  </div>\r\n   <br>\r\n   <br>\r\n  <router-link :to=\"{ name: 'Home' }\">Go to the top</router-link>\r\n</template>\r\n\r\n<script>\r\n// @ is an alias to /src\r\n// import HelloWorld from \"@/components/HelloWorld.vue\";\r\nimport EventCard from '@/components/EventCard.vue'\r\nimport EventService from '@/services/EventService.js'\r\n//import { watchEffect } from '@vue/runtime-core'\r\n\r\nexport default {\r\n  //receive page variable props in the component\r\n  name: 'EventList',\r\n  props: {\r\n    page: {\r\n      type: Number,\r\n      required: true\r\n    },\r\n    perPage: {\r\n      type: Number,\r\n      required: true\r\n    }\r\n  },\r\n  components: {\r\n    EventCard\r\n    // register it as a child component\r\n  },\r\n  data() {\r\n    return {\r\n      events: null,\r\n      totalEvents: 0 // <-- Added this to store totalEvents\r\n    }\r\n  },\r\n  /*created() {\r\n    watchEffect(() => {\r\n      EventService.getEvents(this.perPage, this.page)\r\n        .then((response) => {\r\n          this.events = response.data.data\r\n          this.totalEvents = response.headers['x-total-count'] // <-- Store it\r\n        })\r\n        .catch((error) => {\r\n          console.log(error)\r\n        })\r\n    })\r\n  },*/\r\n\r\n  beforeRouteEnter(routeTo, routeFrom, next) {\r\n    EventService.getEvents(parseInt(routeTo.query.perPage) || 5)\r\n      .then((response) => {\r\n        next((comp) => {\r\n          comp.events = response.data\r\n          comp.totalEvents = response.headers['x-total-count']\r\n        })\r\n      })\r\n      .catch(() => {\r\n        next({ name: 'NetworkError' })\r\n      })\r\n  },\r\n  beforeRouteUpdate(routeTo, routeFrom, next) {\r\n    EventService.getEventsparseInt(parseInt(routeTo.query.perPage) || 5)\r\n      .then((response) => {\r\n        this.events = response.data\r\n        this.totalEvents = response.headers['x-total-count']\r\n        next()\r\n      })\r\n      .catch(() => {\r\n        next({ name: 'NetworkError' })\r\n      })\r\n  },\r\n    computed: {\r\n    hasNextPage() {\r\n      // First, calculate total pages\r\n      let totalPages = Math.ceil(this.totalEvents / 2) // 2 is events per page\r\n\r\n      // Then check to see if the current page is less than the total pages.\r\n      return this.perPage < totalPages\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.events {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n</style>"],"sourceRoot":""}]}