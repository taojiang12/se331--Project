{"remainingRequest":"D:\\Vue\\SE331-2021-PROJECT1\\project\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\Vue\\SE331-2021-PROJECT1\\project\\src\\views\\Home.vue?vue&type=style&index=0&id=fae5bece&scoped=true&lang=css","dependencies":[{"path":"D:\\Vue\\SE331-2021-PROJECT1\\project\\src\\views\\Home.vue","mtime":1629032962732},{"path":"D:\\Vue\\SE331-2021-PROJECT1\\project\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\SE331-2021-PROJECT1\\project\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Vue\\SE331-2021-PROJECT1\\project\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Vue\\SE331-2021-PROJECT1\\project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\SE331-2021-PROJECT1\\project\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouZXZlbnRzIHsNCiAgZGlzcGxheTogZmxleDsNCiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCn0NCg=="},{"version":3,"sources":["D:\\Vue\\SE331-2021-PROJECT1\\project\\src\\views\\Home.vue"],"names":[],"mappings":";AAyFA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACN,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACtB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACrB","file":"D:/Vue/SE331-2021-PROJECT1/project/src/views/Home.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div class=\"events\">\r\n    <EventCard v-for=\"event in events\" :key=\"event.id\" :event=\"event\" />\r\n  </div>\r\n   <br>\r\n   <br>\r\n  <router-link :to=\"{ name: 'Home' }\">Go to the top</router-link>\r\n</template>\r\n\r\n<script>\r\n// @ is an alias to /src\r\n// import HelloWorld from \"@/components/HelloWorld.vue\";\r\nimport EventCard from '@/components/EventCard.vue'\r\nimport EventService from '@/services/EventService.js'\r\n//import { watchEffect } from '@vue/runtime-core'\r\n\r\nexport default {\r\n  //receive page variable props in the component\r\n  name: 'EventList',\r\n  props: {\r\n    page: {\r\n      type: Number,\r\n      required: true\r\n    },\r\n    perPage: {\r\n      type: Number,\r\n      required: true\r\n    }\r\n  },\r\n  components: {\r\n    EventCard\r\n    // register it as a child component\r\n  },\r\n  data() {\r\n    return {\r\n      events: null,\r\n      totalEvents: 0 // <-- Added this to store totalEvents\r\n    }\r\n  },\r\n  /*created() {\r\n    watchEffect(() => {\r\n      EventService.getEvents(this.perPage, this.page)\r\n        .then((response) => {\r\n          this.events = response.data.data\r\n          this.totalEvents = response.headers['x-total-count'] // <-- Store it\r\n        })\r\n        .catch((error) => {\r\n          console.log(error)\r\n        })\r\n    })\r\n  },*/\r\n\r\n  beforeRouteEnter(routeTo, routeFrom, next) {\r\n    EventService.getEvents(parseInt(routeTo.query.perPage) || 5)\r\n      .then((response) => {\r\n        next((comp) => {\r\n          comp.events = response.data\r\n          comp.totalEvents = response.headers['x-total-count']\r\n        })\r\n      })\r\n      .catch(() => {\r\n        next({ name: 'NetworkError' })\r\n      })\r\n  },\r\n  beforeRouteUpdate(routeTo, routeFrom, next) {\r\n    EventService.getEventsparseInt(parseInt(routeTo.query.perPage) || 5)\r\n      .then((response) => {\r\n        this.events = response.data\r\n        this.totalEvents = response.headers['x-total-count']\r\n        next()\r\n      })\r\n      .catch(() => {\r\n        next({ name: 'NetworkError' })\r\n      })\r\n  },\r\n    computed: {\r\n    hasNextPage() {\r\n      // First, calculate total pages\r\n      let totalPages = Math.ceil(this.totalEvents / 2) // 2 is events per page\r\n\r\n      // Then check to see if the current page is less than the total pages.\r\n      return this.perPage < totalPages\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.events {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n</style>"]}]}